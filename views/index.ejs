<!DOCTYPE html>
<html lang="pt-Br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style.css"> <!--CHAMA O CSS-->
  
    <title>Convites</title>
</head>
<body>
  
    <nav> <!--   -->
       <ul> <!--   -->
       
           <li><a href="/"><h1><h1>Perola Negra Convites</h1></h1></a> </li><!--o h1 e melhor para pesquisa do google-->
           <li>  <a href="/redirecionar">Cadastrar</a>  </li>
           <li> <a href="#lista"> Lista de Convites </a></li>
           
           
           
           
       </ul>
    </nav>

    <% if(mensagem != ""){ %>
        <section id="mensagem">
        <p> <%=mensagem%> </p> <span id="close"> &times; </span>
        </section>
     <% } %>
    
     <main>
        <section id="cadastro"> <!--caminho para o CSS o ID serve para todos os itens de uma div-->


            

            <div>

                <% if ( itens == undefined) { %>  <!-- MONSTRA A PAGINA PRINCIPAL DO POKEMON  -->

                    <h2>Cadastre um novo convite</h2>
        
                    <form action="/creat" method="post"> <!--o FORM esta recebendo as informações que vem do array-->
                        <!-- o ACTION manda a requisição que foi feita que estão no form. "/CEAT" >  manda os dados para uma rota do back end.(index.js) resumindo manda uma requisição atraves da "/creat" recebe os dados e manda atraves do o methodo "post"
                         >> -->
        
                         
                        <label for="nome"> Nome:</label><!--    -->
                        <input type="text" id="nome" name="nome" required>
        
                        <label for="descricao"> Descrição:</label>
                        <input type="text" id="descricao" name="descricao" required><!--    -->
                        
                        
                        
        
                        <label for="imagem"> Link da Imagem:</label><!--    -->
                        <input type="text" id="imagem" name="imagem"  required>
                         

                

                        <button id="btnCadastrar" type="submit"> Cadastrar</button><!--    -->
                       
        
                    </form>
                     
                    <% } else { %><!-- ESSA CONDIÇÃO E QUANDO CLICAR EM EDITAR AI MOSTRA A PAGINA DE ATUALIZAR    -->
        
                        <h2>editar</h2>
                    <form action="/update/<%= itens.id %>" method="post"><!-- manda PARA SER FEITO A ATUALIZAÇÃO    -->
                      
        
                        <label for="nome"> Nome:</label><!--    -->
                        <input type="text" id="nome" name="nome" value="<%= itens.nome %>"><!--  o value envia os valores do pokemon  -->
        
                        <label for="descricao"> Descrição:</label><!--    -->
                        <input type="text" id="descricao" name="descricao" value="<%= itens.descricao %> " >
        
                      
                    
                        <label for="imagem"> Link da Imagem:</label>
                        <input type="text" id="imagem" name="imagem" value="<%= itens.imagem %> "><!--    -->
        
                        <button id="btnAtualizar" type="submit"> editar</button><!--  quando apertar em atualizar manda apara a pagina UPDATE  -->
                      
                        
        
        
        
                    </form>
                    <% } %>
            </div>

        </section>




        <section id="lista">
                 <h2>Lista de Convites</h2>

            <% convites.forEach((itens) => { %> <!-- aqui esta chamando o array POKEDEX que foi criado atraves do FOREACH o >>>POKEMON são itens<<-->

               <div class="card"> <!--dentro dessa DIV mostra todos os objetos do ARRAY POKEDEX -->
                <p><h3> <%= itens.nome %> </h3> </p>
                 <a><img src="<%= itens.imagem%>" alt=""> </a> 
               

               

                    <!-- envia o ID (identidade )para ser editado no botão editar-->
                   <a id="apagar" href="/delete/<%= itens.id %>"> Deletar</a>
                   <a id="editar" href="/detalhes/<%= itens.id %>">Informações</a>
               </div>
       
              <%})  %> <!-- FECHOU O ARRAY POKEDEX -->
        </section>
       
        
     </main>

     <footer>
         <p>Todos os direitos preservados  &copy; Meu: <a target="_blank" href="https://www.linkedin.com/in/robervan-souza/">LinkedIn</a></p>
         <p>Meu: <a target="_blank" href="https://github.com/RobervanSouza"> Github</a></p>
     </footer>
     <script src="/js/script.js"></script>
</body>
</html>